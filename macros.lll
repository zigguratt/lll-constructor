;;; ---------------------------------------------------------------------------
;;; Macros for the LLL constructor demonstration.

(seq

  ;; --------------------------------------------------------------------------
  ;; Constant definitions.

  ;; Memory.
  (def 'temp-data 0x00)
  (def 'code-body 0x20)

  ;; Storage.
  (def 'parameter 0x00)

  ;; Precomputed function ID.
  (def 'get-parameter 0x40f4f7b9)

  ;; Jumping here causes an EVM error.
  (def 'invalid-location 0x02)

  ;; --------------------------------------------------------------------------
  ;; Extract the four leftmost bytes of input.

  (def 'bytes4 (input)
    (div input (exp 2 224)))

  ;; --------------------------------------------------------------------------
  ;; Retrieve function ID from the first four bytes of the call data.

  (def 'function-id
    (bytes4 (calldataload 0x00)))

)
